{"version":3,"sources":["../src/WFEnrolCSVFilepicker.js"],"names":["define","$","init","id","ajax_url","role","hasBeenProcess","previousFile","find","bind","fileurl","attr","ajax","type","url","data","courseid","datatype","success","response","json","JSON","parse","show","hide","val","empty","msg","append","error","console","log"],"mappings":"AACAA,OAAM,uCAAC,CAAC,QAAD,CAAW,UAAX,CAAD,CAAyB,SAASC,CAAT,CAAY,CACvC,QAASC,CAAAA,CAAT,CAAcC,CAAd,CAAkBC,CAAlB,CAA4BC,CAA5B,CAAiC,IACzBC,CAAAA,CAAc,GADW,CAEzBC,CAAY,CAAG,EAFU,CAG7BN,CAAC,CAAC,aAAaI,CAAb,CAAkB,WAAnB,CAAD,CAAiCG,IAAjC,CAAsC,sBAAtC,EAA8DC,IAA9D,CAAmE,iBAAnE,CAAqF,UAAU,CAC3F,GAAG,IAAAH,CAAH,CAA0B,CAAC,MAAQ,CACnC,GAAII,CAAAA,CAAO,CAAGT,CAAC,CAAC,aAAaI,CAAb,CAAkB,WAAnB,CAAD,CAAiCG,IAAjC,CAAsC,sBAAtC,EAA8DA,IAA9D,CAAmE,GAAnE,EAAwEG,IAAxE,CAA6E,MAA7E,CAAd,CACA,GAAG,CAACD,CAAD,EAAYH,CAAY,EAAIG,CAA/B,CAAuC,CAAC,MAAQ,CAChDH,CAAY,CAAGG,CAAf,CACAJ,CAAc,GAAd,CAEAL,CAAC,CAACW,IAAF,CAAO,CACHC,IAAI,CAAE,MADH,CAEHC,GAAG,CAAEV,CAFF,CAGHW,IAAI,CAAC,CACDD,GAAG,CAAEJ,CADJ,CAEDM,QAAQ,CAAEb,CAFT,CAHF,CAOHc,QAAQ,CAAE,MAPP,CAQHC,OAAO,CAAC,iBAASC,CAAT,CAAkB,CACtB,GAAIC,CAAAA,CAAI,CAAGC,IAAI,CAACC,KAAL,CAAWH,CAAX,CAAX,CACA,GAAgB,QAAb,EAAAC,CAAI,CAACP,IAAR,CAAyB,CACrBZ,CAAC,CAAC,kBAAkBE,CAAnB,CAAD,CAAwBoB,IAAxB,EACH,CAFD,IAEK,CACDtB,CAAC,CAAC,kBAAkBE,CAAnB,CAAD,CAAwBqB,IAAxB,EACH,CACDvB,CAAC,CAAC,eAAD,CAAD,CAAqBwB,GAArB,CAAyBL,CAAI,CAACP,IAA9B,EACAZ,CAAC,CAAC,IAAII,CAAJ,CAAS,6BAAV,CAAD,CAA0CqB,KAA1C,GACA,GAAe,EAAZ,EAAAN,CAAI,CAACO,GAAR,CAAkB,CACd1B,CAAC,CAAC,IAAII,CAAJ,CAAS,6BAAV,CAAD,CAA0CuB,MAA1C,CAAiDR,CAAI,CAACO,GAAtD,CACH,CACDrB,CAAc,GACjB,CArBE,CAsBHuB,KAAK,CAAC,eAASA,CAAT,CAAe,CACjBC,OAAO,CAACC,GAAR,CAAYF,CAAZ,CACH,CAxBE,CAAP,CA0BH,CAjCD,CAkCH,CAED,MAAO,CACH3B,IAAI,CAAE,cAASC,CAAT,CAAaC,CAAb,CAAuBC,CAAvB,CAA4B,CAC9BH,CAAI,CAACC,CAAD,CAAKC,CAAL,CAAeC,CAAf,CACP,CAHE,CAKV,CA7CK,CAAN","sourcesContent":["/* jshint ignore:start */\r\ndefine(['jquery', 'jqueryui'], function($) {\r\n    function init(id, ajax_url, role){\r\n        var hasBeenProcess = false;\r\n        var previousFile = \"\";\r\n        $(\"#fitem_id_\"+role+\"_userfile\").find(\".filepicker-filename\").bind(\"DOMNodeInserted\",function(){\r\n            if(hasBeenProcess == true){return;}\r\n            var fileurl = $(\"#fitem_id_\"+role+\"_userfile\").find(\".filepicker-filename\").find(\"a\").attr(\"href\");\r\n            if(!fileurl || previousFile == fileurl){return;}\r\n            previousFile = fileurl;\r\n            hasBeenProcess = true;\r\n\r\n            $.ajax({\r\n                type: \"POST\",\r\n                url: ajax_url,\r\n                data:{\r\n                    url: fileurl,\r\n                    courseid: id\r\n                },\r\n                datatype: \"json\",\r\n                success:function(response){\r\n                    var json = JSON.parse(response);\r\n                    if(json.type == \"simple\"){\r\n                        $(\".panel-complex.\"+id).show();\r\n                    }else{\r\n                        $(\".panel-complex.\"+id).hide();\r\n                    }\r\n                    $(\"[name=\\'type\\']\").val(json.type);\r\n                    $(\"#\"+role+\"-workflow-csv-enrol-warning\").empty();\r\n                    if(json.msg != \"\"){\r\n                        $(\"#\"+role+\"-workflow-csv-enrol-warning\").append(json.msg);\r\n                    }\r\n                    hasBeenProcess = false;\r\n                },\r\n                error:function(error){\r\n                    console.log(error);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    return {\r\n        init: function(id, ajax_url, role){\r\n            init(id, ajax_url, role);\r\n        }\r\n    };\r\n});"],"file":"WFEnrolCSVFilepicker.min.js"}